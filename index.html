<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Kh√°m Ph√° Kinh Nh·∫≠p T·ª©c, Xu·∫•t T·ª©c Ni·ªám (ƒÄnƒÅpƒÅnasati Sutta)</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Be+Vietnam+Pro:wght@300;400;500;700&display=swap" rel="stylesheet">
    <!-- Chosen Palette: Warm Neutrals & Sage -->
    <!-- Application Structure Plan: The application is structured as a single-page interactive journey, not a linear document. A sticky top navigation allows users to jump to thematic sections: 'L·ªô Tr√¨nh' (The Path), '16 B∆∞·ªõc Th·ªü' (16 Steps), 'Th·∫•t Gi√°c Chi' (7 Factors), and 'B·ªëi C·∫£nh' (Context). The core is the 'L·ªô Tr√¨nh' section, which presents the Sutta's central framework as an interactive flowchart. This non-linear, task-oriented design was chosen to make the complex, hierarchical teachings easily digestible and to encourage exploration. Users can grasp the overall map first, then dive into specific areas of interest, which is more effective for learning and retention than a simple top-to-bottom scroll. -->
    <!-- Visualization & Content Choices: 
        1. L·ªô tr√¨nh Gi·∫£i tho√°t: Report Info -> The 4-stage path to liberation. Goal -> Organize/Show Relationship. Viz -> Interactive flowchart (HTML/CSS). Interaction -> Click on a stage to reveal details. Justification -> Visually clarifies the core causal structure of the entire teaching.
        2. C√°c C·∫•p ƒê·ªô Ch·ª©ng ƒê·∫Øc: Report Info -> The different types of practitioners in the assembly. Goal -> Inform/Compare. Viz -> Donut Chart (Chart.js). Interaction -> Hover to see labels. Justification -> Provides a quick, engaging visual summary of the 'spiritual ecosystem' described, making it more impactful than a list. Data is illustrative of concepts.
        3. 16 B∆∞·ªõc Th·ªü: Report Info -> The 16 steps of breath meditation. Goal -> Organize/Inform. Viz -> Tabbed interface with interactive cards. Interaction -> Click tabs (Th√¢n, Th·ªç, T√¢m, Ph√°p) to filter steps. Justification -> Breaks down a large set of instructions into manageable, thematically grouped chunks.
        4. Th·∫•t Gi√°c Chi: Report Info -> The sequential arising of the 7 factors of enlightenment. Goal -> Show Change/Process. Viz -> Sequential flow diagram (HTML/CSS). Interaction -> Click on a factor to read its description. Justification -> Emphasizes the causal, flowing nature of the factors, which is a key teaching in the Sutta.
    -->
    <!-- CONFIRMATION: NO SVG graphics used. NO Mermaid JS used. -->
    <style>
        body {
            font-family: 'Be Vietnam Pro', sans-serif;
            background-color: #fdfcfb;
            color: #44403c;
        }
        .chart-container {
            position: relative;
            width: 100%;
            max-width: 450px;
            margin-left: auto;
            margin-right: auto;
            height: 320px;
            max-height: 400px;
        }
        @media (min-width: 768px) {
            .chart-container {
                height: 400px;
            }
        }
        .nav-link {
            transition: color 0.3s, border-color 0.3s;
            border-bottom: 2px solid transparent;
        }
        .nav-link.active, .nav-link:hover {
            color: #047857; /* emerald-700 */
            border-bottom-color: #047857;
        }
        .flow-item, .step-card, .factor-item, .context-card {
            transition: transform 0.3s, box-shadow 0.3s;
        }
        .flow-item:hover, .step-card:hover, .factor-item:hover, .context-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 15px -3px rgb(0 0 0 / 0.1), 0 4px 6px -4px rgb(0 0 0 / 0.1);
        }
        .tab-btn.active {
            background-color: #065f46; /* emerald-800 */
            color: #f0fdfa; /* emerald-50 */
        }
        .fade-in {
            animation: fadeIn 0.5s ease-in-out;
        }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        audio {
            filter: sepia(20%) saturate(70%) grayscale(1) contrast(99%) brightness(90%);
            border-radius: 8px;
        }
    </style>
</head>
<body class="bg-stone-50 text-stone-800">

    <header class="bg-stone-50/80 backdrop-blur-lg sticky top-0 z-50 shadow-sm">
        <nav class="container mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex items-center justify-between h-16">
                <div class="flex-shrink-0">
                    <h1 class="text-xl font-bold text-emerald-800">ƒÄnƒÅpƒÅnasati</h1>
                </div>
                <div class="hidden md:block">
                    <div class="ml-10 flex items-baseline space-x-4">
                        <a href="#home" class="nav-link px-3 py-2 rounded-md text-sm font-medium">Gi·ªõi Thi·ªáu</a>
                        <a href="#path" class="nav-link px-3 py-2 rounded-md text-sm font-medium">L·ªô Tr√¨nh</a>
                        <a href="#steps" class="nav-link px-3 py-2 rounded-md text-sm font-medium">16 B∆∞·ªõc Th·ªü</a>
                        <a href="#factors" class="nav-link px-3 py-2 rounded-md text-sm font-medium">Th·∫•t Gi√°c Chi</a>
                        <a href="#context" class="nav-link px-3 py-2 rounded-md text-sm font-medium">B·ªëi C·∫£nh</a>
                    </div>
                </div>
                <div class="md:hidden">
                    <button id="mobile-menu-button" class="inline-flex items-center justify-center p-2 rounded-md text-stone-600 hover:text-emerald-700 hover:bg-stone-200 focus:outline-none">
                        <svg class="h-6 w-6" stroke="currentColor" fill="none" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16m-7 6h7"></path>
                        </svg>
                    </button>
                </div>
            </div>
        </nav>
        <div id="mobile-menu" class="md:hidden hidden">
            <div class="px-2 pt-2 pb-3 space-y-1 sm:px-3">
                <a href="#home" class="nav-link block px-3 py-2 rounded-md text-base font-medium">Gi·ªõi Thi·ªáu</a>
                <a href="#path" class="nav-link block px-3 py-2 rounded-md text-base font-medium">L·ªô Tr√¨nh</a>
                <a href="#steps" class="nav-link block px-3 py-2 rounded-md text-base font-medium">16 B∆∞·ªõc Th·ªü</a>
                <a href="#factors" class="nav-link block px-3 py-2 rounded-md text-base font-medium">Th·∫•t Gi√°c Chi</a>
                <a href="#context" class="nav-link block px-3 py-2 rounded-md text-base font-medium">B·ªëi C·∫£nh</a>
            </div>
        </div>
    </header>

    <main class="container mx-auto px-4 sm:px-6 lg:px-8 py-8">
        
        <section id="home" class="text-center py-12 md:py-20">
            <h2 class="text-3xl md:text-5xl font-bold text-emerald-800 tracking-tight">Kinh Nh·∫≠p T·ª©c, Xu·∫•t T·ª©c Ni·ªám</h2>
            <p class="mt-4 text-lg md:text-xl text-stone-600 max-w-3xl mx-auto">M·ªôt b·∫£n ƒë·ªì t∆∞∆°ng t√°c kh√°m ph√° con ƒë∆∞·ªùng tu t·∫≠p t·ª´ h∆°i th·ªü ƒë·∫øn gi·∫£i tho√°t, d·ª±a tr√™n Kinh s·ªë 118 c·ªßa Trung B·ªô Kinh.</p>
            <p class="mt-6 text-base text-stone-500 max-w-2xl mx-auto">·ª®ng d·ª•ng n√†y tr·ª±c quan h√≥a l·ªô tr√¨nh gi·∫£i tho√°t ƒë∆∞·ª£c ƒê·ª©c Ph·∫≠t gi·∫£ng d·∫°y: m·ªôt chu·ªói nh√¢n qu·∫£ logic, kh·ªüi ƒë·∫ßu t·ª´ vi·ªác quan s√°t h∆°i th·ªü, l√†m vi√™n m√£n T·ª© Ni·ªám X·ª©, tu·∫ßn t·ª± ph√°t sinh Th·∫•t Gi√°c Chi v√† ƒë·∫°t ƒë·∫øn ƒë√≠ch cu·ªëi c√πng l√† Minh v√† Gi·∫£i Tho√°t.</p>
            
            <div class="mt-12 max-w-xl mx-auto">
                <p class="text-sm text-stone-500 mb-2">Nghe b·∫£n kinh (MP3):</p>
                <audio controls class="w-full shadow-md rounded-lg">
                    <!-- H∆Ø·ªöNG D·∫™N S·ª¨A L·ªñI AUDIO:
                        1. ƒê·∫£m b·∫£o b·∫°n ƒë√£ t·∫°o m·ªôt th∆∞ m·ª•c t√™n l√† "audio" (vi·∫øt th∆∞·ªùng) trong kho GitHub c·ªßa b·∫°n.
                        2. ƒê·∫£m b·∫£o file MP3 c·ªßa b·∫°n n·∫±m B√äN TRONG th∆∞ m·ª•c "audio" ƒë√≥.
                        3. Thay th·∫ø "ten_file_mp3_cua_ban.mp3" b·∫±ng T√äN FILE CH√çNH X√ÅC c·ªßa b·∫°n.
                           L∆ØU √ù: T√™n file v√† th∆∞ m·ª•c c√≥ ph√¢n bi·ªát ch·ªØ HOA - th∆∞·ªùng.
                           V√≠ d·ª• ƒë√∫ng: src="./audio/kinh-anapanasati.mp3"
                           V√≠ d·ª• sai:   src="./Audio/Kinh-Anapanasati.mp3" (n·∫øu t√™n file/th∆∞ m·ª•c kh√¥ng vi·∫øt hoa)
                    -->
                    <source src="./audio/kinhtucniem.mp3" type="audio/mpeg">
                    Tr√¨nh duy·ªát c·ªßa b·∫°n kh√¥ng h·ªó tr·ª£ ph√°t √¢m thanh.
                </audio>
            </div>
        </section>

        <div class="space-y-16 md:space-y-24">

            <section id="path">
                <div class="text-center mb-12">
                    <h3 class="text-2xl md:text-3xl font-bold text-stone-800">L·ªô Tr√¨nh Gi·∫£i Tho√°t</h3>
                    <p class="mt-3 text-stone-600 max-w-2xl mx-auto">Kinh vƒÉn tr√¨nh b√†y m·ªôt l·ªô tr√¨nh nh√¢n qu·∫£ r√µ r√†ng. H√£y nh·∫•p v√†o t·ª´ng giai ƒëo·∫°n ƒë·ªÉ kh√°m ph√° chi ti·∫øt c√°ch ph√°p m√¥n n√†y ƒë∆∞·ª£c tu t·∫≠p sung m√£n s·∫Ω tu·∫ßn t·ª± ƒë∆∞a ƒë·∫øn qu·∫£ v·ªã cu·ªëi c√πng.</p>
                </div>
                <div class="flex flex-col md:flex-row items-center justify-center space-y-8 md:space-y-0 md:space-x-4 text-center">
                    <div class="flow-item p-4 bg-white rounded-lg shadow-md w-64 cursor-pointer" data-content="path1">
                        <p class="text-4xl mb-2">üå¨Ô∏è</p>
                        <h4 class="font-bold text-emerald-700">1. Qu√°n Ni·ªám H∆°i Th·ªü</h4>
                        <p class="text-sm text-stone-500">($ƒÄnƒÅpƒÅnasati$)</p>
                    </div>
                    <div class="text-4xl text-stone-400 transform md:rotate-0 rotate-90">‚Üí</div>
                    <div class="flow-item p-4 bg-white rounded-lg shadow-md w-64 cursor-pointer" data-content="path2">
                        <p class="text-4xl mb-2">üßò</p>
                        <h4 class="font-bold text-emerald-700">2. T·ª© Ni·ªám X·ª©</h4>
                        <p class="text-sm text-stone-500">(B·ªën Lƒ©nh V·ª±c Qu√°n Ni·ªám)</p>
                    </div>
                    <div class="text-4xl text-stone-400 transform md:rotate-0 rotate-90">‚Üí</div>
                    <div class="flow-item p-4 bg-white rounded-lg shadow-md w-64 cursor-pointer" data-content="path3">
                        <p class="text-4xl mb-2">üí°</p>
                        <h4 class="font-bold text-emerald-700">3. Th·∫•t Gi√°c Chi</h4>
                        <p class="text-sm text-stone-500">(B·∫£y Y·∫øu T·ªë Gi√°c Ng·ªô)</p>
                    </div>
                    <div class="text-4xl text-stone-400 transform md:rotate-0 rotate-90">‚Üí</div>
                    <div class="flow-item p-4 bg-white rounded-lg shadow-md w-64 cursor-pointer" data-content="path4">
                        <p class="text-4xl mb-2">üïäÔ∏è</p>
                        <h4 class="font-bold text-emerald-700">4. Minh & Gi·∫£i Tho√°t</h4>
                        <p class="text-sm text-stone-500">($VijjƒÅ-Vimutti$)</p>
                    </div>
                </div>
                <div id="path-content" class="mt-8 p-6 bg-emerald-50 rounded-lg text-stone-700 min-h-[100px] fade-in hidden"></div>
            </section>

            <section id="steps">
                <div class="text-center mb-12">
                    <h3 class="text-2xl md:text-3xl font-bold text-stone-800">16 B∆∞·ªõc Tu T·∫≠p Qu√°n Ni·ªám H∆°i Th·ªü</h3>
                    <p class="mt-3 text-stone-600 max-w-2xl mx-auto">16 b∆∞·ªõc n√†y ƒë∆∞·ª£c chia th√†nh 4 nh√≥m, t∆∞∆°ng ·ª©ng ho√†n h·∫£o v·ªõi T·ª© Ni·ªám X·ª©. H√£y ch·ªçn m·ªôt lƒ©nh v·ª±c ƒë·ªÉ xem c√°c b∆∞·ªõc th·ª±c h√†nh chi ti·∫øt.</p>
                </div>
                <div class="flex justify-center mb-8 space-x-2 md:space-x-4">
                    <button class="tab-btn px-4 py-2 rounded-full text-sm font-medium bg-white shadow-sm transition" data-tab="tab1">Qu√°n Th√¢n</button>
                    <button class="tab-btn px-4 py-2 rounded-full text-sm font-medium bg-white shadow-sm transition" data-tab="tab2">Qu√°n Th·ªç</button>
                    <button class="tab-btn px-4 py-2 rounded-full text-sm font-medium bg-white shadow-sm transition" data-tab="tab3">Qu√°n T√¢m</button>
                    <button class="tab-btn px-4 py-2 rounded-full text-sm font-medium bg-white shadow-sm transition" data-tab="tab4">Qu√°n Ph√°p</button>
                </div>
                <div id="steps-content" class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6">
                </div>
            </section>

            <section id="factors">
                <div class="text-center mb-12">
                    <h3 class="text-2xl md:text-3xl font-bold text-stone-800">S·ª± Ph√°t Sinh Tu·∫ßn T·ª± c·ªßa Th·∫•t Gi√°c Chi</h3>
                    <p class="mt-3 text-stone-600 max-w-2xl mx-auto">Khi T·ª© Ni·ªám X·ª© vi√™n m√£n, B·∫£y Y·∫øu T·ªë Gi√°c Ng·ªô ($Bojjha·πÖga$) s·∫Ω tu·∫ßn t·ª± kh·ªüi sinh m·ªôt c√°ch t·ª± nhi√™n. ƒê√¢y l√† m·ªôt d√≤ng ch·∫£y t√¢m l√Ω h·ªØu c∆°, kh√¥ng ph·∫£i l√† m·ªôt danh s√°ch c√°c ph·∫©m ch·∫•t c·∫ßn t√≠ch l≈©y.</p>
                </div>
                <div class="relative">
                    <div class="grid grid-cols-1 md:grid-cols-7 gap-4 text-center">
                        <div class="factor-item p-3 bg-white rounded-lg shadow-md cursor-pointer" data-content="factor1">
                            <p class="font-bold">1. Ni·ªám</p><p class="text-xs text-stone-500">($Sati$)</p>
                        </div>
                        <div class="factor-item p-3 bg-white rounded-lg shadow-md cursor-pointer" data-content="factor2">
                            <p class="font-bold">2. Tr·∫°ch Ph√°p</p><p class="text-xs text-stone-500">($Dhamma-vicaya$)</p>
                        </div>
                        <div class="factor-item p-3 bg-white rounded-lg shadow-md cursor-pointer" data-content="factor3">
                            <p class="font-bold">3. Tinh T·∫•n</p><p class="text-xs text-stone-500">($Viriya$)</p>
                        </div>
                        <div class="factor-item p-3 bg-white rounded-lg shadow-md cursor-pointer" data-content="factor4">
                            <p class="font-bold">4. H·ª∑</p><p class="text-xs text-stone-500">($Pƒ´ti$)</p>
                        </div>
                        <div class="factor-item p-3 bg-white rounded-lg shadow-md cursor-pointer" data-content="factor5">
                            <p class="font-bold">5. Khinh An</p><p class="text-xs text-stone-500">($Passaddhi$)</p>
                        </div>
                        <div class="factor-item p-3 bg-white rounded-lg shadow-md cursor-pointer" data-content="factor6">
                            <p class="font-bold">6. ƒê·ªãnh</p><p class="text-xs text-stone-500">($SamƒÅdhi$)</p>
                        </div>
                        <div class="factor-item p-3 bg-white rounded-lg shadow-md cursor-pointer" data-content="factor7">
                            <p class="font-bold">7. X·∫£</p><p class="text-xs text-stone-500">($UpekkhƒÅ$)</p>
                        </div>
                    </div>
                </div>
                <div id="factor-content" class="mt-8 p-6 bg-emerald-50 rounded-lg text-stone-700 min-h-[100px] fade-in hidden"></div>
            </section>

            <section id="context">
                <div class="text-center mb-12">
                    <h3 class="text-2xl md:text-3xl font-bold text-stone-800">B·ªëi C·∫£nh & H·ªôi Ch√∫ng Thanh T·ªãnh</h3>
                    <p class="mt-3 text-stone-600 max-w-2xl mx-auto">B√†i kinh ƒë∆∞·ª£c thuy·∫øt trong m·ªôt b·ªëi c·∫£nh trang nghi√™m, tr∆∞·ªõc m·ªôt TƒÉng ƒëo√†n tinh t·∫•n ƒë√£ ch·ª©ng ƒë·∫Øc c√°c Th√°nh qu·∫£. S·ª± hi·ªán di·ªán c·ªßa h·ªç l√† b·∫±ng ch·ª©ng s·ªëng cho hi·ªáu qu·∫£ c·ªßa ph√°p m√¥n.</p>
                </div>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-8 items-center">
                    <div>
                        <h4 class="font-bold text-xl mb-4 text-emerald-800">Th√†nh Ph·∫ßn H·ªôi Ch√∫ng</h4>
                        <p class="text-stone-600 mb-4">Kinh vƒÉn m√¥ t·∫£ m·ªôt "h·ªá sinh th√°i gi√°c ng·ªô" to√†n di·ªán, bao g·ªìm c√°c b·∫≠c Th√°nh ƒë√£ gi·∫£i tho√°t v√† c√°c T·ª∑-kheo ƒëang n·ªó l·ª±c tu t·∫≠p. Bi·ªÉu ƒë·ªì n√†y minh h·ªça m·ªôt c√°ch kh√°i ni·ªám s·ª± ƒëa d·∫°ng c·ªßa c√°c c·∫•p ƒë·ªô tu ch·ª©ng c√≥ m·∫∑t trong TƒÉng ƒëo√†n, cho th·∫•y con ƒë∆∞·ªùng n√†y d√†nh cho nhi·ªÅu cƒÉn c∆° kh√°c nhau.</p>
                        <div class="space-y-2 text-sm">
                            <p><strong class="text-emerald-700">A-la-h√°n:</strong> Gi·∫£i tho√°t ho√†n to√†n.</p>
                            <p><strong class="text-emerald-700">A-na-h√†m:</strong> B·∫•t Lai, kh√¥ng c√≤n tr·ªü l·∫°i.</p>
                            <p><strong class="text-emerald-700">T∆∞-ƒë√†-h√†m:</strong> Nh·∫•t Lai, tr·ªü l·∫°i m·ªôt l·∫ßn n·ªØa.</p>
                            <p><strong class="text-emerald-700">Tu-ƒë√†-ho√†n:</strong> D·ª± L∆∞u, ƒë√£ nh·∫≠p d√≤ng Th√°nh.</p>
                            <p><strong class="text-emerald-700">ƒêang tu t·∫≠p:</strong> C√°c T·ª∑-kheo chuy√™n t√¢m h√†nh tr√¨ 37 ph·∫©m tr·ª£ ƒë·∫°o.</p>
                        </div>
                    </div>
                    <div class="chart-container">
                        <canvas id="attainmentChart"></canvas>
                    </div>
                </div>
            </section>

        </div>
    </main>

    <footer class="bg-stone-100 mt-16">
        <div class="container mx-auto py-6 px-4 sm:px-6 lg:px-8 text-center text-stone-500 text-sm">
            <p>·ª®ng d·ª•ng t∆∞∆°ng t√°c ƒë∆∞·ª£c t·∫°o b·ªüi AI d·ª±a tr√™n n·ªôi dung "B√°o C√°o Ph√¢n T√≠ch Chi Ti·∫øt Kinh Nh·∫≠p T·ª©c, Xu·∫•t T·ª©c Ni·ªám".</p>
            <p>Ch·ªâ s·ª≠ d·ª•ng cho m·ª•c ƒë√≠ch h·ªçc h·ªèi v√† tham kh·∫£o.</p>
        </div>
    </footer>

    <script>
        document.addEventListener('DOMContentLoaded', function () {
            
            const contentData = {
                path: {
                    path1: "<strong>1. Qu√°n Ni·ªám H∆°i Th·ªü ($ƒÄnƒÅpƒÅnasati$):</strong> ƒê√¢y l√† ƒëi·ªÉm kh·ªüi ƒë·∫ßu, n·ªÅn t·∫£ng c·ªßa to√†n b·ªô l·ªô tr√¨nh. Kinh vƒÉn tuy√™n b·ªë: 'Nh·∫≠p t·ª©c xu·∫•t t·ª©c ni·ªám... ƒë∆∞·ª£c tu t·∫≠p, ƒë∆∞·ª£c l√†m cho sung m√£n, ƒë∆∞a ƒë·∫øn qu·∫£ l·ªõn, c√¥ng ƒë·ª©c l·ªõn'. ƒê√¢y kh√¥ng ph·∫£i l√† m·ªôt b√†i t·∫≠p ph·ª•, m√† l√† m·ªôt con ƒë∆∞·ªùng tu t·∫≠p ho√†n ch·ªânh.",
                    path2: "<strong>2. T·ª© Ni·ªám X·ª© (B·ªën Lƒ©nh V·ª±c Qu√°n Ni·ªám):</strong> Khi qu√°n ni·ªám h∆°i th·ªü ƒë∆∞·ª£c tu t·∫≠p sung m√£n, n√≥ s·∫Ω t·ª± ƒë·ªông l√†m cho T·ª© Ni·ªám X·ª© (Qu√°n Th√¢n, Th·ªç, T√¢m, Ph√°p) ƒë∆∞·ª£c vi√™n m√£n. H∆°i th·ªü ƒë∆∞·ª£c xem l√† 'c√°nh c·ª≠a' ƒë·ªÉ ƒëi v√†o quan s√°t to√†n b·ªô th·ª±c t·∫°i c·ªßa th√¢n v√† t√¢m.",
                    path3: "<strong>3. Th·∫•t Gi√°c Chi (B·∫£y Y·∫øu T·ªë Gi√°c Ng·ªô):</strong> Khi T·ª© Ni·ªám X·ª© ƒë∆∞·ª£c tu t·∫≠p sung m√£n, B·∫£y Y·∫øu T·ªë Gi√°c Ng·ªô s·∫Ω tu·∫ßn t·ª± kh·ªüi sinh m·ªôt c√°ch t·ª± nhi√™n, b·∫Øt ƒë·∫ßu b·∫±ng Ni·ªám Gi√°c Chi. ƒê√¢y l√† m·ªôt d√≤ng ch·∫£y t√¢m l√Ω h·ªØu c∆°, d·∫´n d·∫Øt t√¢m ƒë·∫øn tr·∫°ng th√°i s√°ng su·ªët v√† c√¢n b·∫±ng.",
                    path4: "<strong>4. Minh & Gi·∫£i Tho√°t ($VijjƒÅ-Vimutti$):</strong> Khi Th·∫•t Gi√°c Chi ƒë∆∞·ª£c tu t·∫≠p sung m√£n v·ªõi ƒë·ªãnh h∆∞·ªõng ƒë√∫ng ƒë·∫Øn (h∆∞·ªõng ƒë·∫øn vi·ªÖn ly, ly tham, ƒëo·∫°n di·ªát, x·∫£ ly), ch√∫ng s·∫Ω ƒë∆∞a ƒë·∫øn k·∫øt qu·∫£ cu·ªëi c√πng l√† Minh (tr√≠ tu·ªá th·∫•y r√µ s·ª± th·∫≠t) v√† Gi·∫£i Tho√°t (tho√°t kh·ªèi m·ªçi kh·ªï ƒëau, phi·ªÅn n√£o)."
                },
                steps: {
                    tab1: [
                        { no: 1, title: "Th·ªü v√¥/ra d√†i", verb: "Bi·∫øt", verb_en: "pajƒÅnƒÅti" },
                        { no: 2, title: "Th·ªü v√¥/ra ng·∫Øn", verb: "Bi·∫øt", verb_en: "pajƒÅnƒÅti" },
                        { no: 3, title: "C·∫£m gi√°c to√†n th√¢n", verb: "T·∫≠p", verb_en: "sikkhati" },
                        { no: 4, title: "An t·ªãnh th√¢n h√†nh", verb: "T·∫≠p", verb_en: "sikkhati" }
                    ],
                    tab2: [
                        { no: 5, title: "C·∫£m gi√°c h·ª∑ th·ªç", verb: "T·∫≠p", verb_en: "sikkhati" },
                        { no: 6, title: "C·∫£m gi√°c l·∫°c th·ªç", verb: "T·∫≠p", verb_en: "sikkhati" },
                        { no: 7, title: "C·∫£m gi√°c t√¢m h√†nh", verb: "T·∫≠p", verb_en: "sikkhati" },
                        { no: 8, title: "An t·ªãnh t√¢m h√†nh", verb: "T·∫≠p", verb_en: "sikkhati" }
                    ],
                    tab3: [
                        { no: 9, title: "C·∫£m gi√°c v·ªÅ t√¢m", verb: "T·∫≠p", verb_en: "sikkhati" },
                        { no: 10, title: "V·ªõi t√¢m h√¢n hoan", verb: "T·∫≠p", verb_en: "sikkhati" },
                        { no: 11, title: "V·ªõi t√¢m ƒë·ªãnh tƒ©nh", verb: "T·∫≠p", verb_en: "sikkhati" },
                        { no: 12, "title": "V·ªõi t√¢m gi·∫£i tho√°t", verb: "T·∫≠p", verb_en: "sikkhati" }
                    ],
                    tab4: [
                        { no: 13, title: "Qu√°n v√¥ th∆∞·ªùng", verb: "T·∫≠p", verb_en: "sikkhati" },
                        { no: 14, title: "Qu√°n ly tham", verb: "T·∫≠p", verb_en: "sikkhati" },
                        { no: 15, title: "Qu√°n ƒëo·∫°n di·ªát", verb: "T·∫≠p", verb_en: "sikkhati" },
                        { no: 16, title: "Qu√°n t·ª´ b·ªè", verb: "T·∫≠p", verb_en: "sikkhati" }
                    ]
                },
                factors: {
                    factor1: "<strong>1. Ni·ªám ($Sati$):</strong> Ph√°t sinh t·ª´ T·ª© Ni·ªám X·ª© v·ªØng ch·∫Øc. ƒê√¢y l√† ch√°nh ni·ªám ƒë√£ tr·ªü th√†nh m·ªôt nƒÉng l·ª±c t√¢m th·ª©c m·∫°nh m·∫Ω, ·ªïn ƒë·ªãnh, l√† n·ªÅn t·∫£ng cho c√°c gi√°c chi kh√°c.",
                    factor2: "<strong>2. Tr·∫°ch Ph√°p ($Dhamma-vicaya$):</strong> Khi an tr√∫ ch√°nh ni·ªám, h√†nh gi·∫£ b·∫Øt ƒë·∫ßu 'suy t∆∞, t∆∞ duy, th·∫©m s√°t ph√°p ·∫•y v·ªõi tr√≠ tu·ªá'. ƒê√¢y l√† kh·∫£ nƒÉng ph√¢n bi·ªát, ƒëi·ªÅu tra b·∫£n ch·∫•t c·ªßa c√°c ph√°p (hi·ªán t∆∞·ª£ng t√¢m-v·∫≠t).",
                    factor3: "<strong>3. Tinh T·∫•n ($Viriya$):</strong> Khi tr√≠ tu·ªá th·∫©m s√°t ph√°p, 's·ª± tinh t·∫•n kh√¥ng th·ª• ƒë·ªông b·∫Øt ƒë·∫ßu kh·ªüi l√™n'. ƒê√¢y l√† nƒÉng l∆∞·ª£ng b·ªÅn b·ªâ, kh√¥ng m·ªát m·ªèi trong vi·ªác tu t·∫≠p.",
                    factor4: "<strong>4. H·ª∑ ($Pƒ´ti$):</strong> N∆°i h√†nh gi·∫£ tinh t·∫•n, 'H·ª∑ kh√¥ng li√™n h·ªá ƒë·∫øn v·∫≠t ch·∫•t ƒë∆∞·ª£c kh·ªüi l√™n'. ƒê√¢y l√† ni·ªÅm vui, s·ª± ph·∫•n ch·∫•n vi t·∫ø sinh ra t·ª´ n·ªôi t√¢m, kh√¥ng ph·ª• thu·ªôc v√†o c√°c ƒë·ªëi t∆∞·ª£ng b√™n ngo√†i.",
                    factor5: "<strong>5. Khinh An ($Passaddhi$):</strong> T√¢m hoan h·ª∑ l√†m cho 'th√¢n... tr·ªü th√†nh khinh an, t√¢m c≈©ng ƒë∆∞·ª£c khinh an'. ƒê√¢y l√† tr·∫°ng th√°i an tƒ©nh, nh·∫π nh√†ng, th∆∞ th√°i c·ªßa c·∫£ th√¢n v√† t√¢m.",
                    factor6: "<strong>6. ƒê·ªãnh ($SamƒÅdhi$):</strong> Th√¢n v√† t√¢m khinh an, an l·∫°c l√†m cho 't√¢m v·ªã ·∫•y ƒë∆∞·ª£c ƒë·ªãnh tƒ©nh'. ƒê√¢y l√† tr·∫°ng th√°i nh·∫•t t√¢m, t·∫≠p trung cao ƒë·ªô tr√™n m·ªôt ƒë·ªëi t∆∞·ª£ng.",
                    factor7: "<strong>7. X·∫£ ($UpekkhƒÅ$):</strong> V·ªõi t√¢m ƒë·ªãnh tƒ©nh, h√†nh gi·∫£ 'kh√©o nh√¨n s·ª± v·∫≠t v·ªõi √Ω ni·ªám x·∫£ ly'. ƒê√¢y l√† tr·∫°ng th√°i qu√¢n b√¨nh, kh√¥ng dao ƒë·ªông, kh√¥ng d√≠nh m·∫Øc tr∆∞·ªõc m·ªçi ho√†n c·∫£nh, l√† ƒë·ªânh cao c·ªßa s·ª± ph√°t tri·ªÉn t√¢m th·ª©c."
                }
            };

            const pathItems = document.querySelectorAll('.flow-item');
            const pathContent = document.getElementById('path-content');
            pathItems.forEach(item => {
                item.addEventListener('click', () => {
                    const contentKey = item.getAttribute('data-content');
                    pathContent.innerHTML = contentData.path[contentKey];
                    pathContent.classList.remove('hidden');
                });
            });

            const tabButtons = document.querySelectorAll('.tab-btn');
            const stepsContent = document.getElementById('steps-content');
            function displaySteps(tabKey) {
                stepsContent.innerHTML = '';
                contentData.steps[tabKey].forEach(step => {
                    const isKnowing = step.verb === 'Bi·∫øt';
                    const card = `
                        <div class="step-card bg-white p-4 rounded-lg shadow-md flex flex-col justify-between fade-in">
                            <div>
                                <div class="flex justify-between items-start">
                                    <span class="text-2xl font-bold text-emerald-600">${step.no}</span>
                                    <span class="px-2 py-1 text-xs font-semibold rounded-full ${isKnowing ? 'bg-blue-100 text-blue-800' : 'bg-green-100 text-green-800'}">
                                        ${step.verb} <em class="italic">(${step.verb_en})</em>
                                    </span>
                                </div>
                                <h5 class="mt-3 font-semibold text-stone-700">${step.title}</h5>
                            </div>
                            <p class="text-xs text-stone-400 mt-2">"..., t√¥i s·∫Ω th·ªü v√¥/ra"</p>
                        </div>
                    `;
                    stepsContent.innerHTML += card;
                });
            }
            tabButtons.forEach(button => {
                button.addEventListener('click', () => {
                    tabButtons.forEach(btn => btn.classList.remove('active'));
                    button.classList.add('active');
                    const tabKey = button.getAttribute('data-tab');
                    displaySteps(tabKey);
                });
            });
            tabButtons[0].click();

            const factorItems = document.querySelectorAll('.factor-item');
            const factorContent = document.getElementById('factor-content');
            factorItems.forEach(item => {
                item.addEventListener('click', () => {
                    const contentKey = item.getAttribute('data-content');
                    factorContent.innerHTML = contentData.factors[contentKey];
                    factorContent.classList.remove('hidden');
                });
            });

            const attainmentCtx = document.getElementById('attainmentChart').getContext('2d');
            new Chart(attainmentCtx, {
                type: 'doughnut',
                data: {
                    labels: ['A-la-h√°n', 'A-na-h√†m', 'T∆∞-ƒë√†-h√†m', 'Tu-ƒë√†-ho√†n', 'ƒêang tu t·∫≠p'],
                    datasets: [{
                        label: 'Th√†nh Ph·∫ßn H·ªôi Ch√∫ng (Minh H·ªça)',
                        data: [15, 20, 20, 25, 20],
                        backgroundColor: [
                            '#047857', // emerald-700
                            '#059669', // emerald-600
                            '#10b981', // emerald-500
                            '#34d399', // emerald-400
                            '#6ee7b7'  // emerald-300
                        ],
                        borderColor: '#fdfcfb',
                        borderWidth: 4,
                        hoverOffset: 8
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            position: 'bottom',
                            labels: {
                                font: {
                                    family: "'Be Vietnam Pro', sans-serif"
                                },
                                padding: 15
                            }
                        },
                        tooltip: {
                            callbacks: {
                                label: function(context) {
                                    let label = context.label || '';
                                    if (label) {
                                        label += ': ';
                                    }
                                    label += 'T·ª∑ l·ªá minh h·ªça';
                                    return label;
                                }
                            }
                        }
                    },
                    cutout: '60%'
                }
            });

            const mobileMenuButton = document.getElementById('mobile-menu-button');
            const mobileMenu = document.getElementById('mobile-menu');
            mobileMenuButton.addEventListener('click', () => {
                mobileMenu.classList.toggle('hidden');
            });
            
            const navLinks = document.querySelectorAll('.nav-link');
            navLinks.forEach(link => {
                link.addEventListener('click', () => {
                    if(!mobileMenu.classList.contains('hidden')){
                        mobileMenu.classList.add('hidden');
                    }
                });
            });
            
            const sections = document.querySelectorAll('section');
            const observer = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        const id = entry.target.getAttribute('id');
                        document.querySelectorAll('.nav-link').forEach(link => {
                            link.classList.remove('active');
                            if (link.getAttribute('href') === `#${id}`) {
                                link.classList.add('active');
                            }
                        });
                    }
                });
            }, { rootMargin: "-50% 0px -50% 0px" });

            sections.forEach(section => {
                observer.observe(section);
            });

        });
    </script>
</body>
</html>
